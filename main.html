<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∞–π—Ç–∞–Ω –º–∞—à–∏–Ω–∞</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a1a;
            margin: 0;
            padding: 20px;
            color: #ffffff;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #2d2d2d;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            padding: 30px;
        }

        h1 {
            text-align: center;
            color: #ffffff;
            margin-bottom: 30px;
            font-size: 2.2em;
            text-transform: uppercase;
            letter-spacing: 3px;
            padding: 15px;
            background: linear-gradient(45deg, #1a1a1a, #363636);
            border: 2px solid #2980b9;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(41, 128, 185, 0.3),
                        inset 0 0 15px rgba(41, 128, 185, 0.2);
            text-shadow: 0 0 10px rgba(41, 128, 185, 0.5);
            position: relative;
            overflow: hidden;
        }

        h1::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(41, 128, 185, 0.3),
                transparent
            );
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% {
                left: -100%;
            }
            20% {
                left: 100%;
            }
            100% {
                left: 100%;
            }
        }

        .students-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .student-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            margin-bottom: 8px;
            background-color: #363636;
            border-radius: 8px;
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s;
            cursor: pointer;
        }

        .student-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            background-color: #404040;
        }

        .student-item.absent {
            background-color: rgba(231, 76, 60, 0.2);
        }

        .student-item.absent .student-number {
            background-color: #c0392b;
        }

        .student-number {
            min-width: 40px;
            height: 40px;
            background-color: #2980b9;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .student-name, .student-surname {
            font-family: 'Segoe UI', sans-serif;
            font-size: 1.1em;
            font-weight: 500;
            color: #ffffff;
        }

        .student-name {
            margin-right: 8px;
        }

        .student-surname {
            margin-left: 0;
        }

        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }

            .student-item {
                padding: 10px 15px;
            }

            .student-number {
                min-width: 35px;
                height: 35px;
                margin-right: 15px;
            }
        }

        .random-student-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #363636;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .random-button, .new-lesson-button {
            background-color: #2980b9;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
            width: 100%;
        }

        .random-button:hover, .new-lesson-button:hover {
            background-color: #3498db;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .random-student-display {
            font-size: 1.3em;
            color: #ffffff;
            font-weight: 500;
            min-height: 30px;
            padding: 10px;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
        }

        .random-student-display .text {
            display: inline-block;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .random-student-display .text.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .random-student-display .char {
            display: inline-block;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.3s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                padding: 15px;
                margin: 0;
                border-radius: 10px;
            }

            h1 {
                font-size: 1.8em;
                margin-bottom: 20px;
            }

            .random-student-container {
                padding: 15px;
                margin-bottom: 20px;
            }

            .random-button, .new-lesson-button {
                width: 100%;
                padding: 15px;
                font-size: 1em;
            }

            .random-student-display {
                font-size: 1.1em;
                padding: 8px;
            }

            .student-item {
                padding: 10px 15px;
                margin-bottom: 6px;
            }

            .student-number {
                min-width: 35px;
                height: 35px;
                margin-right: 12px;
                font-size: 0.9em;
            }

            .student-name, .student-surname {
                font-size: 0.95em;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 5px;
            }

            .container {
                padding: 10px;
            }

            h1 {
                font-size: 1.5em;
            }

            .random-button, .new-lesson-button {
                padding: 12px;
                font-size: 0.95em;
            }

            .student-item {
                padding: 8px 12px;
            }

            .student-number {
                min-width: 30px;
                height: 30px;
                margin-right: 10px;
            }

            .student-name, .student-surname {
                font-size: 0.9em;
            }
        }

        /* –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –∂–µ—Å—Ç–æ–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (hover: none) {
            .student-item:hover {
                transform: none;
            }

            .random-button:hover, .new-lesson-button:hover {
                transform: none;
            }

            .student-item:active {
                background-color: #404040;
            }

            .random-button:active, .new-lesson-button:active {
                background-color: #3498db;
            }
        }

        /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ iOS –ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º —Ç–∞–ø–µ */
        * {
            touch-action: manipulation;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
        }

        .right-column {
            display: flex;
            flex-direction: column;
            gap: 20px;  /* –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–æ–π –∏ —Å–ø–∏—Å–∫–æ–º */
        }

        .excluded-students {
            background-color: #363636;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            min-height: 150px;
            height: auto;
        }

        .excluded-students h2 {
            font-size: 1.3em;
            margin: 0 0 15px 0;
            color: #ffffff;
        }

        .excluded-list {
            list-style: none;
            padding: 0;
            margin: 0;
            min-height: 80px;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            flex-direction: column;
            height: auto;
        }

        .excluded-item {
            background-color: #404040;
            padding: 12px 20px;
            margin-bottom: 8px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            animation: slideInWithBounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            transform-origin: top;
            opacity: 0;
            max-height: 0;
            transform: translateX(-20px);
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes slideInWithBounce {
            0% {
                opacity: 0;
                transform: translateX(-20px);
                max-height: 0;
                padding-top: 0;
                padding-bottom: 0;
                margin-bottom: 0;
            }
            70% {
                transform: translateX(5px);
                max-height: 50px;
                padding-top: 12px;
                padding-bottom: 12px;
                margin-bottom: 8px;
            }
            100% {
                opacity: 1;
                transform: translateX(0);
                max-height: 45px;
                padding-top: 12px;
                padding-bottom: 12px;
                margin-bottom: 8px;
            }
        }

        .excluded-item.removing {
            animation: slideOutWithBounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            margin-bottom: 0;
            padding-top: 0;
            padding-bottom: 0;
            max-height: 0;
            opacity: 0;
            transform: translateX(20px);
        }

        @keyframes slideOutWithBounce {
            0% {
                opacity: 1;
                transform: translateX(0);
                max-height: 45px;
                padding-top: 12px;
                padding-bottom: 12px;
                margin-bottom: 8px;
            }
            30% {
                transform: translateX(-5px);
                max-height: 50px;
            }
            100% {
                opacity: 0;
                transform: translateX(20px);
                max-height: 0;
                padding-top: 0;
                padding-bottom: 0;
                margin-bottom: 0;
            }
        }

        .excluded-item span {
            font-size: 1.1em;
            flex-grow: 1;
            text-align: left;
        }

        .excluded-item button {
            background-color: #c0392b;
            color: white;
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
            transition: background-color 0.2s;
        }

        .excluded-item button:hover {
            background-color: #e74c3c;
        }

        @media (max-width: 768px) {
            .main-layout {
                grid-template-columns: 1fr;
            }

            .excluded-students {
                order: 2;
            }
        }

        .student-item.selected {
            background-color: rgba(255, 193, 7, 0.2);  /* –ñ–µ–ª—Ç—ã–π —Ñ–æ–Ω –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö */
        }

        .student-item.selected .student-number {
            background-color: #ffc107;  /* –ñ–µ–ª—Ç—ã–π –∫—Ä—É–≥ —Å –Ω–æ–º–µ—Ä–æ–º */
            color: #2d2d2d;  /* –¢–µ–º–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ */
        }

        .special-mode-banner {
            display: none !important; /* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –ø–ª–∞—à–∫—É */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–®–∞–π—Ç–∞–Ω –º–∞—à–∏–Ω–∞</h1>
        
        <div class="main-layout">
            <div class="left-column">
                <div class="random-student-container">
                    <button class="random-button">–í—ã–±—Ä–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É—á–µ–Ω–∏–∫–∞</button>
                    <div class="random-student-display"></div>
                </div>

                <ul class="students-list">
                    <li class="student-item">
                        <div class="student-number">1</div>
                        <span class="student-name">–ê–ª–∏—Å–∞—Ñ–∞</span>
                        <span class="student-surname">–ê–ª–µ—Å–∫–µ—Ä–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">2</div>
                        <span class="student-name">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä</span>
                        <span class="student-surname">–ë–∞–Ω–∑–∞–∫–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">3</div>
                        <span class="student-name">–†–æ–º–∞–Ω</span>
                        <span class="student-surname">–ë–∏—Ä—Ñ–µ–ª—å–¥</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">4</div>
                        <span class="student-name">–ì–µ–æ—Ä–≥–∏–π</span>
                        <span class="student-surname">–ë–ª–∞–≥–æ—á–µ–≤—Å–∫–∏–π</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">5</div>
                        <span class="student-name">–ê—Ä—Ç–µ–º</span>
                        <span class="student-surname">–ë—É–ª–∞—Ç–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">6</div>
                        <span class="student-name">–ö–∏—Ä–∏–ª–ª</span>
                        <span class="student-surname">–í–∞–ª—É–π—Å–∫–∏–π</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">7</div>
                        <span class="student-name">–î–º–∏—Ç—Ä–∏–π</span>
                        <span class="student-surname">–ì—Ä–∏–±–∫–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">8</div>
                        <span class="student-name">–î–∞–Ω–∏–∏–ª</span>
                        <span class="student-surname">–î–∞–Ω–∏–ª–∏–Ω</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">9</div>
                        <span class="student-name">–î–∞—Ä–∏–π</span>
                        <span class="student-surname">–î–∞—Ü–µ–Ω–∫–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">10</div>
                        <span class="student-name">–ò–≤–∞–Ω</span>
                        <span class="student-surname">–î–æ–ª–≥–æ–ø–æ–ª–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">11</div>
                        <span class="student-name">–í—è—á–µ—Å–ª–∞–≤</span>
                        <span class="student-surname">–î–æ–º–Ω–∏–Ω</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">12</div>
                        <span class="student-name">–Ø—Ä–æ—Å–ª–∞–≤</span>
                        <span class="student-surname">–î—Ä–æ–∑–¥–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">13</div>
                        <span class="student-name">–ü–æ–ª–∏–Ω–∞</span>
                        <span class="student-surname">–ï–≥–æ—Ä–æ–≤–∞</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">14</div>
                        <span class="student-name">–î–∞—Ä—å—è</span>
                        <span class="student-surname">–ñ–µ—Ä–¥–µ–≤–∞</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">15</div>
                        <span class="student-name">–ò–ª—å—è</span>
                        <span class="student-surname">–ò–∑—Ä–∞–∑—Ü–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">16</div>
                        <span class="student-name">–ú–∏—Ö–∞–∏–ª</span>
                        <span class="student-surname">–ö–∞–∑–∞–∫–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">17</div>
                        <span class="student-name">–ê–Ω—Ç–æ–Ω</span>
                        <span class="student-surname">–ö–æ–≤—è–∑–∏–Ω</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">18</div>
                        <span class="student-name">–ê–Ω–¥—Ä–µ–π</span>
                        <span class="student-surname">–ö—Ä–∞–≤—á–µ–Ω–∫–æ</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">19</div>
                        <span class="student-name">–ú–∏—Ö–∞–∏–ª</span>
                        <span class="student-surname">–ö—É–∑–Ω–µ—Ü–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">20</div>
                        <span class="student-name">–ú–∏—Ö–∞–∏–ª</span>
                        <span class="student-surname">–õ—é–∫–µ–≤–∏—á</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">21</div>
                        <span class="student-name">–ï–ª–∏–∑–∞–≤–µ—Ç–∞</span>
                        <span class="student-surname">–ü–µ—Ç–∏–Ω–∞</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">22</div>
                        <span class="student-name">–ê—Ä–º–∞–Ω</span>
                        <span class="student-surname">–°—Ç—Ä–æ–π–Ω–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">23</div>
                        <span class="student-name">–ë–æ—Ä–∏—Å</span>
                        <span class="student-surname">–°—Ç—É–ø–∏–Ω</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">24</div>
                        <span class="student-name">–°—Ç–µ–ø–∞–Ω</span>
                        <span class="student-surname">–¢–∏—Ö–æ–º–∏—Ä–æ–≤</span>
                    </li>
                    <li class="student-item">
                        <div class="student-number">25</div>
                        <span class="student-name">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä</span>
                        <span class="student-surname">–®–º–µ–ª–µ–≤</span>
                    </li>
                </ul>
            </div>

            <div class="right-column">
                <button class="new-lesson-button">–ù–æ–≤—ã–π —É—Ä–æ–∫</button>
                <div class="excluded-students">
                    <h2>–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —É—á–µ–Ω–∏–∫–∏</h2>
                    <ul class="excluded-list"></ul>
                </div>
            </div>
        </div>
    </div>

    <div id="specialMode" style="display: none;" class="special-mode-banner">
        <span>üé≤ –†–µ–∂–∏–º "—Å–≤–æ–∏" –∞–∫—Ç–∏–≤–µ–Ω!</span>
        <span id="specialModeTimer"></span>
    </div>

    <script>
        // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ —Å–∫—Ä–∏–ø—Ç–∞
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IP –∞–¥—Ä–µ—Å–∞
        async function getIPAddress() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                return '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π IP';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
        async function sendVisitNotification() {
            try {
                const ip = await getIPAddress();
                const date = new Date().toLocaleString('ru-RU');
                console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:', { ip, date }); // –û—Ç–ª–∞–¥–∫–∞
                
                const response = await fetch('https://api.telegram.org/bot7512260695:AAGRESRxQglZSb0mTFQri6ZFOha8PakUstA/sendMessage', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: '1228708306',
                        text: `üîî –ù–æ–≤–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ —Å–∞–π—Ç–∞!\nüìÖ –î–∞—Ç–∞: ${date}\nüåê IP: ${ip}`
                    })
                });
                
                const result = await response.json();
                console.log('–û—Ç–≤–µ—Ç –æ—Ç Telegram:', result); // –û—Ç–ª–∞–¥–∫–∞
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:', error);
            }
        }

        // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', sendVisitNotification);

        const excludedList = document.querySelector('.excluded-list');
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–ª–∞–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
        let isAnimating = false;

        // –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–ø–∏—Å–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö
        async function sendAbsentList() {
            const absentStudents = document.querySelectorAll('.student-item.absent');
            
            if (absentStudents.length === 0) {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ –≤—Å–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
                try {
                    await fetch('https://api.telegram.org/bot7512260695:AAGRESRxQglZSb0mTFQri6ZFOha8PakUstA/sendMessage', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: '1228708306',
                            text: '‚úÖ –í—Å–µ —É—á–µ–Ω–∏–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç!'
                        })
                    });
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:', error);
                }
                return;
            }

            const absentList = Array.from(absentStudents).map(student => {
                const number = student.querySelector('.student-number').textContent;
                const name = student.querySelector('.student-name').textContent;
                const surname = student.querySelector('.student-surname').textContent;
                return `${number}. ${name} ${surname}`;
            }).join('\n');

            const message = `üìã –°–ø–∏—Å–æ–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö:\n\n${absentList}`;

            try {
                await fetch('https://api.telegram.org/bot7512260695:AAGRESRxQglZSb0mTFQri6ZFOha8PakUstA/sendMessage', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: '1228708306',
                        text: message
                    })
                });
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–ø–∏—Å–∫–∞:', error);
            }
        }

        // –û–±–Ω–æ–≤–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ —É—á–µ–Ω–∏–∫–∞—Ö
        document.querySelectorAll('.student-item').forEach(item => {
            item.addEventListener('click', async function() {
                if (isAnimating) return;

                this.classList.toggle('absent');
                const number = this.querySelector('.student-number').textContent;
                
                if (this.classList.contains('absent')) {
                    addToExcluded(this);
                } else {
                    const existingItem = excludedList.querySelector(`[data-number="${number}"]`);
                    if (existingItem) {
                        existingItem.classList.add('removing');
                        existingItem.addEventListener('animationend', function() {
                            existingItem.remove();
                        });
                    }
                }

                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
                await sendAbsentList();
            });
        });

        function addToExcluded(student) {
            const name = student.querySelector('.student-name').textContent;
            const surname = student.querySelector('.student-surname').textContent;
            const number = student.querySelector('.student-number').textContent;
            
            if (!excludedList.querySelector(`[data-number="${number}"]`)) {
                const excludedItem = document.createElement('li');
                excludedItem.className = 'excluded-item';
                excludedItem.setAttribute('data-number', number);
                excludedItem.innerHTML = `
                    <span>${number}. ${name} ${surname}</span>
                    <button onclick="removeFromExcluded(this, '${number}')">&times;</button>
                `;
                
                excludedList.appendChild(excludedItem);
            }
        }

        const randomButton = document.querySelector('.random-button');
        const displayElement = document.querySelector('.random-student-display');
        const selectedStudents = new Set();

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
        function animateText(text) {
            displayElement.innerHTML = '';
            const wrapper = document.createElement('div');
            wrapper.className = 'text';
            
            text.split('').forEach((char, index) => {
                const span = document.createElement('span');
                span.className = 'char';
                span.textContent = char === ' ' ? '\u00A0' : char;
                span.style.animationDelay = `${index * 0.05}s`;
                if (char === ' ') {
                    span.style.marginRight = '0.3em';
                }
                wrapper.appendChild(span);
            });

            displayElement.appendChild(wrapper);
            
            setTimeout(() => {
                wrapper.classList.add('visible');
            }, 50);
        }

        // –û–±–Ω–æ–≤–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞
        randomButton.addEventListener('click', async function() {
            try {
                // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ñ–∏–≥
                const response = await fetch('/config.json');
                const config = await response.json();
                console.log('–ü–æ–ª—É—á–µ–Ω –∫–æ–Ω—Ñ–∏–≥:', config);

                // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤
                const students = document.querySelectorAll('.student-item:not(.absent)');
                const availableStudents = Array.from(students).filter(student => {
                    const number = student.querySelector('.student-number').textContent;
                    return !selectedStudents.has(number);
                });

                if (availableStudents.length === 0) {
                    if (students.length === 0) {
                        animateText('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤!');
                    } else {
                        animateText('–í—Å–µ —É—á–µ–Ω–∏–∫–∏ –æ–ø—Ä–æ—à–µ–Ω—ã!');
                        selectedStudents.clear();
                        document.querySelectorAll('.student-item').forEach(item => {
                            item.classList.remove('selected');
                        });
                    }
                    return;
                }

                let finalStudents = availableStudents;

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∂–∏–º "–Ω–∞—Å–æ–ª–∏—Ç—å"
                if (config.salted_student) {
                    const saltedStudent = availableStudents.find(student => 
                        student.querySelector('.student-number').textContent === config.salted_student
                    );
                    
                    if (saltedStudent) {
                        console.log('–ù–∞–π–¥–µ–Ω –Ω–∞—Å–æ–ª–µ–Ω–Ω—ã–π —É—á–µ–Ω–∏–∫:', config.salted_student);
                        finalStudents = [saltedStudent];
                    }
                } 
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∂–∏–º "—Å–≤–æ–∏"
                else if (config.special_mode && config.mode_expires_at) {
                    const expiresAt = new Date(config.mode_expires_at + 'Z');
                    const now = new Date();
                    
                    if (now < expiresAt) {
                        console.log('–†–µ–∂–∏–º —Å–≤–æ–∏ –∞–∫—Ç–∏–≤–µ–Ω');
                        // –ü–æ–ª—É—á–∞–µ–º –Ω–æ–º–µ—Ä–∞ –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤
                        const excludedNumbers = ["11", "15", "25", "9"];
                        console.log('–ò—Å–∫–ª—é—á–µ–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞:', excludedNumbers);
                        
                        // –§–∏–ª—å—Ç—Ä—É–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤
                        finalStudents = availableStudents.filter(student => {
                            const number = student.querySelector('.student-number').textContent;
                            const isExcluded = excludedNumbers.includes(number);
                            if (isExcluded) {
                                console.log(`–ò—Å–∫–ª—é—á–∞–µ–º —É—á–µ–Ω–∏–∫–∞ –Ω–æ–º–µ—Ä ${number}`);
                            }
                            return !isExcluded;
                        });
                        
                        // –ï—Å–ª–∏ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–∏–∫–æ–≥–æ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ—Ö
                        if (finalStudents.length === 0) {
                            console.log('–ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å —É—á–µ–Ω–∏–∫–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö');
                            finalStudents = availableStudents;
                        }
                    } else {
                        console.log('–í—Ä–µ–º—è —Ä–µ–∂–∏–º–∞ —Å–≤–æ–∏ –∏—Å—Ç–µ–∫–ª–æ');
                    }
                }

                console.log(`–î–æ—Å—Ç—É–ø–Ω–æ —É—á–µ–Ω–∏–∫–æ–≤: ${finalStudents.length}`);
                
                // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É—á–µ–Ω–∏–∫–∞
                const randomIndex = Math.floor(Math.random() * finalStudents.length);
                const selectedStudent = finalStudents[randomIndex];

                const number = selectedStudent.querySelector('.student-number').textContent;
                const name = selectedStudent.querySelector('.student-name').textContent;
                const surname = selectedStudent.querySelector('.student-surname').textContent;
                
                console.log(`–í—ã–±—Ä–∞–Ω —É—á–µ–Ω–∏–∫: ${number}. ${name} ${surname}`);
                
                selectedStudents.add(number);
                selectedStudent.classList.add('selected');
                
                animateText(`${name} ${surname}`);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —É—á–µ–Ω–∏–∫–∞:', error);
                animateText('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞!');
            }
        });

        // –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é removeFromExcluded
        function removeFromExcluded(button, number) {
            const item = button.parentElement;
            item.classList.add('removing');
            
            item.addEventListener('animationend', async function() {
                item.remove();
                const student = document.querySelector(`.student-item:nth-child(${number})`);
                student.classList.remove('absent');
                student.classList.remove('selected');
                selectedStudents.delete(number);
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
                await sendAbsentList();
            });
        }

        // –û–±–Ω–æ–≤–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ù–æ–≤—ã–π —É—Ä–æ–∫"
        document.querySelector('.new-lesson-button').addEventListener('click', function() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
            document.querySelectorAll('.student-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º Set –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —É—á–µ–Ω–∏–∫–æ–≤
            selectedStudents.clear();

            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤—ã–≤–æ–¥–∞
            displayElement.innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            animateText('–ù–æ–≤—ã–π —É—Ä–æ–∫ –Ω–∞—á–∞—Ç!');
        });
    </script>
</body>
</html>